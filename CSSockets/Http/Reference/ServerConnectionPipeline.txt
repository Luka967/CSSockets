WaitHead => OnReqHead
----------------------------------
hasReqHead = false
hasResHead = false
hasReqBody = false
hasResBody = false

Base => HeadParser
HeadParser => X                 | OnReqHead
BodyParser =>                   | X
HeadSerializer =>               | X
BodySerializer =>               | X

OnReqHead => OnReqBodyFinish | SendHead
----------------------------------
hasReqHead = true
hasResHead = false
hasReqBody = false
hasResBody = false

Base => BodyParser
HeadParser => BodyParser (once) | X
BodyParser => req.buffer        | OnReqBodyFinish
HeadSerializer => Base
BodySerializer => X             | X

OnReqHead | OnReqBodyFinish => SendHead
----------------------------------
hasReqHead = true
hasResHead = false
hasReqBody = true
hasResBody = false

Base => X
HeadParser => X                 | X
BodyParser => X                 | X
HeadSerializer => Base
BodySerializer => X             | X


OnReqHead | SendHead => OnReqBodyFinish | FinishResponse
----------------------------------
hasReqHead = true
hasResHead = true
hasReqBody = false
hasResBody = false

Base => BodyParser
HeadParser => X                 | X
BodyParser => req.buffer        | OnReqBodyFinish
HeadSerializer => X
BodySerializer => Base          | FinishResponse

OnReqHead | OnReqBodyFinish => SendHead
----------------------------------
hasReqHead = true
hasResHead = true
hasReqBody = true
hasResBody = false

Base => X
HeadParser => X                 | X
BodyParser => X                 | X
HeadSerializer => X
BodySerializer => Base          | FinishResponse

OnReqHead | SendHead | FinishResponse => OnReqBodyFinish & WaitHead
----------------------------------
hasReqHead = true
hasResHead = true
hasReqBody = true
hasResBody = true

Base => X
HeadParser => X                 | X
BodyParser => X                 | X
HeadSerializer => X
BodySerializer => X             | X

OnReqHead | OnReqBodyFinish | FinishResponse => OnReqBodyFinish & WaitHead
----------------------------------
hasReqHead = true
hasResHead = true
hasReqBody = true
hasResBody = true

Base => X
HeadParser => X                 | X
BodyParser => X                 | X
HeadSerializer => X
BodySerializer => X             | X